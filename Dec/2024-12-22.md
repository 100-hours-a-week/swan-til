## 유용한 명령어

docker compose down -v <br> 
-v 옵션 : 볼륨 제거<br>

docker compose logs [서비스 명]<br>

compose 에서 stderr 를 모아 보여주는 것 같다.<br>

-f, —f 옵션으로 실시간 로그 출력 가능<br>

docker compose exec [서비스 명] [쉘]<br>


### expose, ports

- export : 컨테이너의 포트를 개방하여 같은 도커 네트워크 내에서 접근할 수 있게 합니다. compose, Dockerfile 두 곳에서 설정 가능하며 Dockerfile 이 우선순위를 가집니다.<br>
프록시 뒤에 숨는 서버나 DB를 도커 네트워크 내부에서 다룰 때 사용할 수 있겠네요.<br>
export 는 직접적인 효과는 없고 문서적인 성향의 옵션이란 것 같습니다.<br> 굳이 export 로 포트를 명시하지 않아도 같은 도커 네트워크 내에서 서비스 명을 DNS처럼 통신할 때 사용 가능합니다.<br>
- ports : HostOS, 외부 네트워크에서 접근이 가능하도록 도커 컨테이너 내 포트와 HostOS 이 포트를 매핑합니다. <br>
프록시 서버나 직접 노출될 서버만을 설정할 때 사용할 수 있겠습니다.<br>

### Docker Network 유형

- Bridge : <br>
도커가 제공하는 기본 네트워크 유형. 네트워크 내부 컨테이너들끼리 통신이 가능합니다.<br>
컨테이너 끼리 서비스 명을 DNS 처럼 사용할 수 있습니다.<br>
- Host :<br>
HostOS 의 네트워크 스택을 직접 사용합니다. 네트워크 간 격리가 없으며 네트워크 성능이 중요할 때 사용합니다.<br>
- None :<br>
네트워크 인터페이스를 제공하지 않으며 네트워킹이 불가능합니다. 다른 컨테이너와의 통신도 불가. 완전히 격리됩니다.<br>
- Overlay :<br>
여러 도커 Host 를 한 네트워크로 둘 데 사용합니다. 오케스트레이션 도구에서 사용됩니다.<br>

**고급 (이해가 안되네용)**

Macvlan, IPvlan 은 컨테이너가 물리적 네트워크에 직접 연결된 것처럼 보이게 하기위한 네트워크 드라이버입니다.<br>

1. 고유한 IP 주소를 가질 수 있습니다.<br>
일반적인 bridge 네트워크의 경우 NAT(Network Address Translation) 를 통해  호스트의 IP 를 공유합니다.<br> 경우에 따라 컨테이너에게 고유한 IP 를 가져야할 경우가 있어 사용합니다. <br>
2. 새로운 MAC 주소를 부여해 다른 네트워크 장치처럼 보일 수 있습니다.<br>
3. NAT 를 사용하지 않아 오버헤드 적고 성능에 좋습니다.<br>
4. virtual lan 을 지원하여 같은 물리 네트워크 내에서 네트워크를 세분화하고 격리시킬 수 있음 ( 여러 테넌트 환경에서 격리된 환경을 구성하고 싶을 때.. 동일한 물리적 네트워크에서 고유한 vlan 을 제공해야하는 클라우드 서비스처럼)<br>

- Macvlan :<br>
    Host 의 네트워크 인터페이스를 가상화하여 고유한 Mac 주소, IP 주소를 가지게 합니다. 격리 환경을 가질 수 있습니다.<br>
    사용 사례 : DHCP, 네트워크 장비가 MAC 주소 기반으로 동작할 때<br>
- Ipvlan :<br>
    고유한 IP 주소를 가지게 합니다.(호스트의 MAC 주소 공유) 그리고 성능 상 뛰어납니다.<br>
